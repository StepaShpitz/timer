<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TimerHub — быстрый таймер</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1220; --panel:#171a2b; --panel-2:#1f2340; --text:#e8eaf6; --muted:#aab0d5; --accent:#7c5cff; --accent-2:#12d6df; --danger:#ff4d6d; --ok:#00c853;
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family: 'Poppins', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial; background:linear-gradient(135deg,var(--bg),#0b0e1a 50%, #0a0d1a); color:var(--text)}
    a{color:inherit}
    .wrap{max-width:900px; margin:0 auto; padding:28px 18px; display:grid; gap:20px}

    /* Header */
    header{display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap}
    h1{font-size:clamp(24px,4vw,36px); margin:0; letter-spacing:.2px}
    .muted{color:var(--muted)}

    /* Tabs */
    .tabs{display:flex; gap:10px; background:rgba(255,255,255,.05); padding:6px; border-radius:999px; border:1px solid rgba(255,255,255,.08)}
    .tab{appearance:none; border:none; background:transparent; padding:10px 14px; border-radius:999px; color:var(--muted); cursor:pointer; font-weight:600}
    .tab[aria-selected="true"]{background:linear-gradient(180deg,var(--panel), var(--panel-2)); color:var(--text); box-shadow:0 6px 18px rgba(0,0,0,.25)}

    /* Focused panel */
    .panel{background:linear-gradient(180deg,var(--panel), var(--panel-2)); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); padding:24px; box-shadow:0 10px 30px rgba(0,0,0,.3)}
    .center{display:grid; place-items:center}
    .stack{display:grid; gap:14px}

    /* Timer display */
    .time{font-variant-numeric:tabular-nums; font-feature-settings:"tnum" on; font-size:clamp(48px, 10vw, 96px); letter-spacing:2px; text-align:center}
    .sub{font-size:14px}

    /* Controls */
    .controls{display:flex; gap:12px; justify-content:center}
    button{appearance:none; border:none; border-radius:14px; background:var(--accent); color:white; padding:12px 16px; font-weight:700; cursor:pointer; transition:transform .06s ease, filter .15s, background .2s; box-shadow:0 6px 18px rgba(124,92,255,.35)}
    button:hover{filter:brightness(1.08)}
    button:active{transform:translateY(1px)}
    .ghost{background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.12); box-shadow:none; font-weight:600}
    .ok{background:var(--ok); box-shadow:0 6px 18px rgba(0,200,83,.35)}
    .danger{background:var(--danger); box-shadow:0 6px 18px rgba(255,77,109,.35)}

    /* Subpanels for other demos */
    .grid{display:grid; gap:14px; grid-template-columns:repeat(auto-fill, minmax(240px, 1fr))}
    .card{background:linear-gradient(180deg,var(--panel), var(--panel-2)); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:16px}
    .card h3{margin:0 0 8px; font-size:16px}

    footer{opacity:.7; font-size:13px}
    [hidden]{display:none !important}
    .kbd{font-family: ui-monospace, Menlo, Consolas, monospace; background:#0d1130; border:1px solid rgba(255,255,255,.15); padding:2px 6px; border-radius:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>TimerHub</h1>
        <div class="muted">Минималистичный таймер + галерея вариантов</div>
      </div>
      <div class="tabs" role="tablist" aria-label="Режимы">
        <button class="tab" role="tab" aria-selected="true" data-tab="focus">Главный</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="countdown">Отсчёт</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="radial">Круг</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="pomodoro">Помодоро</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="gallery">Все варианты</button>
      </div>
    </header>

    <!-- FOCUSED: один главный таймер -->
    <section id="panel-focus" class="panel center">
      <div class="stack" style="text-align:center">
        <div class="time" id="focusDisplay" aria-live="polite" aria-atomic="true">00:00</div>
        <div class="controls">
          <button id="focusToggle" class="ok">Старт</button>
          <button id="focusReset" class="ghost">Сброс</button>
        </div>
        <div class="muted sub">Подсказки: <span class="kbd">Space</span> — старт/пауза, <span class="kbd">R</span> — сброс</div>
      </div>
    </section>

    <!-- COUNTDOWN: обратный отсчёт, спрятан по умолчанию -->
    <section id="panel-countdown" class="panel" hidden>
      <div class="stack">
        <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:center">
          <label>Мин: <input type="number" id="minInput" value="1" min="0" style="width:90px"></label>
          <label>Сек: <input type="number" id="secInput" value="0" min="0" max="59" style="width:90px"></label>
        </div>
        <div class="time" id="countdownDisplay">01:00</div>
        <div class="controls">
          <button id="countdownStart" class="ok">Старт</button>
          <button id="countdownPause">Пауза</button>
          <button id="countdownReset" class="ghost">Сброс</button>
        </div>
        <div class="muted sub">Звуковой сигнал при завершении ⏰</div>
      </div>
    </section>

    <!-- RADIAL: круговой прогресс, спрятан по умолчанию -->
    <section id="panel-radial" class="panel" hidden>
      <div style="display:flex; gap:24px; align-items:center; justify-content:center; flex-wrap:wrap">
        <div class="center">
          <div class="radial" style="width:180px; height:180px; position:relative">
            <svg width="180" height="180" viewBox="0 0 120 120" style="transform:rotate(-90deg)">
              <circle cx="60" cy="60" r="54" stroke="rgba(255,255,255,.15)" stroke-width="8" fill="none"/>
              <circle id="radialStroke" cx="60" cy="60" r="54" stroke="var(--accent-2)" stroke-width="8" fill="none" stroke-linecap="round" stroke-dasharray="339.292" stroke-dashoffset="339.292"/>
            </svg>
            <div class="inner" style="position:absolute; inset:0; display:grid; place-items:center">
              <div class="time" id="radialDisplay" style="font-size:40px">00:20</div>
            </div>
          </div>
        </div>
        <div class="stack">
          <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap">
            <button data-radial="20" class="ok">20с</button>
            <button data-radial="60">1м</button>
            <button data-radial="300">5м</button>
          </div>
          <div class="controls">
            <button id="radialToggle">Старт</button>
            <button id="radialReset" class="ghost">Сброс</button>
          </div>
        </div>
      </div>
    </section>

    <!-- POMODORO: спрятан по умолчанию -->
    <section id="panel-pomodoro" class="panel" hidden>
      <div class="stack center">
        <div>
          <div class="time" id="pomoDisplay">25:00</div>
          <div class="muted sub" id="pomoPhase" style="text-align:center">Фокус</div>
        </div>
        <div class="controls">
          <button id="pomoToggle">Старт</button>
          <button id="pomoReset" class="ghost">Сброс</button>
        </div>
        <div style="display:flex; gap:8px; justify-content:center; flex-wrap:wrap">
          <button data-pomo="25-5" class="ok">25/5</button>
          <button data-pomo="50-10">50/10</button>
          <button data-pomo="90-15">90/15</button>
        </div>
      </div>
    </section>

    <!-- GALLERY: карточки со всеми вариантами (как демо), спрятано по умолчанию -->
    <section id="panel-gallery" class="panel" hidden>
      <div class="grid">
        <div class="card"><h3>Простой секундомер</h3><p class="muted">Главный экран и есть этот вариант.</p></div>
        <div class="card"><h3>Отсчёт с вводом</h3><p class="muted">Минуты/секунды + сигнал.</p></div>
        <div class="card"><h3>Круговой прогресс</h3><p class="muted">SVG-индикатор времени.</p></div>
        <div class="card"><h3>Помодоро</h3><p class="muted">Фокус/перерыв с пресетами.</p></div>
      </div>
    </section>

    <footer class="muted">Горячие клавиши: <span class="kbd">Space</span> — старт/пауза, <span class="kbd">R</span> — сброс. Всё без библиотек, чистый JS. Шрифт: Poppins.</footer>
  </div>

  <audio id="beep" preload="auto">
    <source src="data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCA/////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAA==" type="audio/mp3">
  </audio>

  <script>
    // Формат времени
    const fmt = (s) => { s = Math.max(0, Math.floor(s)); const m = Math.floor(s/60).toString().padStart(2,'0'); const ss = (s%60).toString().padStart(2,'0'); return `${m}:${ss}`; };

    // ===== Tabs logic
    (function(){
      const tabs = document.querySelectorAll('.tab');
      const panels = {
        focus: document.getElementById('panel-focus'),
        countdown: document.getElementById('panel-countdown'),
        radial: document.getElementById('panel-radial'),
        pomodoro: document.getElementById('panel-pomodoro'),
        gallery: document.getElementById('panel-gallery')
      };
      function show(name){
        Object.entries(panels).forEach(([k,el])=> el.hidden = (k!==name));
        tabs.forEach(t=> t.setAttribute('aria-selected', String(t.dataset.tab===name)));
      }
      tabs.forEach(t=> t.addEventListener('click', ()=>{ show(t.dataset.tab); }));
      // hash routing (#radial etc.)
      const applyHash=()=>{ const h=location.hash.replace('#',''); if(panels[h]) show(h); else show('focus'); };
      window.addEventListener('hashchange', applyHash); applyHash();
    })();

    // ===== Главный секундомер (минимум UI)
    (function(){
      const display = document.getElementById('focusDisplay');
      const toggle = document.getElementById('focusToggle');
      const reset = document.getElementById('focusReset');
      let running=false, last=0, raf=0, acc=0;
      function loop(ts){ if(!running) return; if(!last) last=ts; const dt=(ts-last)/1000; last=ts; acc+=dt; display.textContent=fmt(acc); raf=requestAnimationFrame(loop); }
      function start(){ if(running) return; running=true; last=0; raf=requestAnimationFrame(loop); toggle.textContent='Пауза'; toggle.classList.remove('ok'); }
      function pause(){ running=false; cancelAnimationFrame(raf); toggle.textContent='Старт'; toggle.classList.add('ok'); }
      function hardReset(){ pause(); acc=0; display.textContent='00:00'; }
      toggle.addEventListener('click', ()=> running? pause(): start());
      reset.addEventListener('click', hardReset);
    })();

    // ===== Обратный отсчёт
    ;(function(){
      const minI = document.getElementById('minInput');
      const secI = document.getElementById('secInput');
      const d = document.getElementById('countdownDisplay');
      const s = document.getElementById('countdownStart');
      const p = document.getElementById('countdownPause');
      const r = document.getElementById('countdownReset');
      const beep = document.getElementById('beep');
      let left=60, running=false, last=0, raf=0;
      const sync = ()=>{ const mins=Math.max(0, +minI.value||0); const secs=Math.max(0, Math.min(59, +secI.value||0)); left=mins*60+secs; d.textContent=fmt(left); };
      minI.addEventListener('input', sync); secI.addEventListener('input', sync); sync();
      function loop(ts){ if(!last) last=ts; const dt=(ts-last)/1000; last=ts; left-=dt; if(left<=0){ left=0; d.textContent=fmt(left); running=false; cancelAnimationFrame(raf); try{beep.currentTime=0; beep.play();}catch(e){} return;} d.textContent=fmt(left); raf=requestAnimationFrame(loop); }
      const start=()=>{ if(running||left<=0) return; running=true; last=0; raf=requestAnimationFrame(loop); };
      const pause=()=>{ running=false; cancelAnimationFrame(raf); };
      const reset=()=>{ pause(); sync(); };
      s.addEventListener('click', start); p.addEventListener('click', pause); r.addEventListener('click', reset);
    })();

    // ===== Круговой
    ;(function(){
      const C=2*Math.PI*54; const stroke = document.getElementById('radialStroke'); const display = document.getElementById('radialDisplay'); const toggle = document.getElementById('radialToggle'); const resetBtn = document.getElementById('radialReset'); const root = document.getElementById('panel-radial'); const beep = document.getElementById('beep');
      let total=20, left=20, running=false, last=0, raf=0;
      stroke.style.strokeDasharray = C; stroke.style.strokeDashoffset = C;
      function setDur(s){ total=s; left=s; display.textContent=fmt(left); stroke.style.strokeDashoffset = C; }
      root.querySelectorAll('button[data-radial]').forEach(b=> b.addEventListener('click', ()=> setDur(+b.dataset.radial)));
      function loop(ts){ if(!last) last=ts; const dt=(ts-last)/1000; last=ts; left-=dt; if(left<=0){ left=0; display.textContent=fmt(left); stroke.style.strokeDashoffset=0; running=false; cancelAnimationFrame(raf); try{beep.currentTime=0; beep.play();}catch(e){} return;} display.textContent=fmt(left); stroke.style.strokeDashoffset = C*(left/total); raf=requestAnimationFrame(loop); }
      const start=()=>{ if(running||left<=0) return; running=true; last=0; raf=requestAnimationFrame(loop); toggle.textContent='Пауза'; };
      const pause=()=>{ running=false; cancelAnimationFrame(raf); toggle.textContent='Старт'; };
      const reset=()=>{ pause(); left=total; display.textContent=fmt(left); stroke.style.strokeDashoffset = C; };
      toggle.addEventListener('click', ()=> running? pause(): start()); resetBtn.addEventListener('click', reset);
    })();

    // ===== Помодоро
    ;(function(){
      const display = document.getElementById('pomoDisplay'); const phaseEl = document.getElementById('pomoPhase'); const toggle = document.getElementById('pomoToggle'); const resetBtn = document.getElementById('pomoReset');
      let focus=25*60, breakT=5*60, left=focus, phase='Фокус', running=false, last=0, raf=0;
      function setPair(f,b){ focus=f*60; breakT=b*60; phase='Фокус'; left=focus; phaseEl.textContent=phase; display.textContent=fmt(left); toggle.textContent='Старт'; }
      document.querySelectorAll('[data-pomo]').forEach(b=> b.addEventListener('click', ()=>{ const [f,b]=b.dataset.pomo.split('-').map(Number); setPair(f,b); }));
      function loop(ts){ if(!last) last=ts; const dt=(ts-last)/1000; last=ts; left-=dt; if(left<=0){ left=0; display.textContent=fmt(left); running=false; cancelAnimationFrame(raf); if(phase==='Фокус'){ phase='Перерыв'; left=breakT; } else { phase='Фокус'; left=focus; } phaseEl.textContent=phase; toggle.textContent='Старт'; return; } display.textContent=fmt(left); raf=requestAnimationFrame(loop); }
      const start=()=>{ if(running||left<=0) return; running=true; last=0; raf=requestAnimationFrame(loop); toggle.textContent='Пауза'; };
      const pause=()=>{ running=false; cancelAnimationFrame(raf); toggle.textContent='Старт'; };
      const reset=()=>{ pause(); left=(phase==='Фокус'?focus:breakT); display.textContent=fmt(left); };
      toggle.addEventListener('click', ()=> running? pause(): start()); resetBtn.addEventListener('click', reset);
    })();

    // ===== Горячие клавиши: Space / R для текущего открытого раздела
    (function(){
      document.addEventListener('keydown', (e)=>{
        if(e.target.matches('input, textarea')) return;
        const key=e.key.toLowerCase();
        const visible = (sel)=>{ const el=document.querySelector(sel); return el && !el.closest('[hidden]'); };
        if(key===' '){ e.preventDefault();
          if(visible('#focusToggle')) document.getElementById('focusToggle').click();
          else if(visible('#countdownStart')) document.getElementById('countdownStart').click();
          else if(visible('#radialToggle')) document.getElementById('radialToggle').click();
          else if(visible('#pomoToggle')) document.getElementById('pomoToggle').click();
        }
        if(key==='r'){
          if(visible('#focusReset')) document.getElementById('focusReset').click();
          else if(visible('#countdownReset')) document.getElementById('countdownReset').click();
          else if(visible('#radialReset')) document.getElementById('radialReset').click();
          else if(visible('#pomoReset')) document.getElementById('pomoReset').click();
        }
      });
    })();
  </script>
</body>
</html>
